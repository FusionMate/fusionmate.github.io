"use strict";(self.webpackChunkFusionMate_Frontend=self.webpackChunkFusionMate_Frontend||[]).push([[8592],{1654:(E,m,i)=>{i.d(m,{s:()=>P});var _=i(6814),d=i(6223),p=i(2296),l=i(7700),c=i(8109),r=i(3498),g=i(4139),t=i(5879),h=i(4362),M=i(2426);function u(n,o){if(1&n&&t._UZ(0,"img",6),2&n){const a=t.oxw();t.Q6J("src",a.assistant.imgURI,t.LSH)}}function f(n,o){1&n&&t._UZ(0,"nz-skeleton-element",7),2&n&&t.Q6J("nzActive",!0)}const v=function(n){return["/detail",n]};function C(n,o){if(1&n&&(t.TgZ(0,"a",9),t._uU(1,"click to chat with the Assistant!"),t.qZA()),2&n){const a=t.oxw(2);t.Q6J("routerLink",t.VKq(1,v,a.assistant.collectionID))}}function O(n,o){if(1&n&&(t.TgZ(0,"nz-timeline-item")(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t.YNc(4,C,2,3,"a",8),t.qZA()()),2&n){const a=o.$implicit,e=o.last,s=t.oxw();t.xp6(2),t.Oqu(a),t.xp6(2),t.Q6J("ngIf",s.isMinted&&e)}}let P=(()=>{var n;class o{constructor(e,s,T,D){this.dialogRef=e,this.data=s,this.web3Service=T,this.accountService=D,this.pendingMsg="",this.timelineList=["Start"],this.isMinted=!1,this.assistant=s,this.dialogRef.disableClose=!0}ngOnInit(){this.approveToken().then(()=>this.mint())}approveToken(){return this.pendingMsg="Approving Token For the Tx...",this.web3Service.invokeContract("FMToken","approve",[this.assistant.contractAddr,this.assistant.mintPrice]).then(()=>{this.pendingMsg="",this.timelineList.push("FMToken Appproved")}).catch(e=>{this.pendingMsg="",this.timelineList.push("Approve Token Failed."),this.dialogRef.disableClose=!1})}mint(){return this.pendingMsg="Mint Assistant...",this.web3Service.invokeContract("Assistant","mintNFT",[],this.assistant.contractAddr).then(()=>{this.pendingMsg="",this.timelineList.push("Assistant Minted."),this.isMinted=!0,this.dialogRef.disableClose=!1}).catch(e=>{this.pendingMsg="",this.timelineList.push("Mint Assistant Failed."),this.dialogRef.disableClose=!1})}}return(n=o).\u0275fac=function(e){return new(e||n)(t.Y36(l.so),t.Y36(l.WI),t.Y36(h.U),t.Y36(M.B))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mint-dialog"]],standalone:!0,features:[t.jDz],decls:7,vars:4,consts:[[1,"mint-dialog"],[2,"grid-column-start","span 2"],[3,"src",4,"ngIf"],["nzType","image",3,"nzActive",4,"ngIf"],[3,"nzPending"],[4,"ngFor","ngForOf"],[3,"src"],["nzType","image",3,"nzActive"],["mat-dialog-close","true",3,"routerLink",4,"ngIf"],["mat-dialog-close","true",3,"routerLink"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Mint Assistant"),t.qZA(),t.YNc(3,u,1,1,"img",2),t.YNc(4,f,1,1,"nz-skeleton-element",3),t.TgZ(5,"nz-timeline",4),t.YNc(6,O,5,2,"nz-timeline-item",5),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("ngIf",s.assistant.imgURI),t.xp6(1),t.Q6J("ngIf",!s.assistant.imgURI),t.xp6(1),t.Q6J("nzPending",s.pendingMsg),t.xp6(1),t.Q6J("ngForOf",s.timelineList))},dependencies:[_.ax,_.O5,c.Bz,c.rH,d.u5,p.ot,l.Is,l.ZT,r.FT,r.Zv,r.PD,g.H0,g.Xw,g.Ql],styles:[".mint-dialog[_ngcontent-%COMP%]{width:40vw;min-height:30vh;padding:2rem 3rem;display:grid;grid-template-columns:2fr 3fr;column-gap:5rem;row-gap:1rem;justify-items:center;align-items:center;border:1px solid rgba(65,65,65,.6);border-radius:4px;background:rgba(56,56,56,.5);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}.mint-dialog[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:10vw;height:10vw;border-radius:8px;border:6px solid #3d3d3d;box-shadow:inset 0 0 3px 6px #31313199;align-self:start}.mint-dialog[_ngcontent-%COMP%]   nz-timeline[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:1rem;font-weight:700;min-height:20vh;justify-self:start}.mint-dialog[_ngcontent-%COMP%]   nz-skeleton-element[_ngcontent-%COMP%]{width:100%;height:100%}.mint-dialog[_ngcontent-%COMP%]   nz-skeleton-element[_ngcontent-%COMP%]   .ant-skeleton-image[_ngcontent-%COMP%]{width:100%;height:100%}"]}),o})()}}]);